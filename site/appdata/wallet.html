<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wallet Connect</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Symbols+Outlined" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 50%, #0f0f1a 100%);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 480px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 32px;
        }

        .header h1 {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 8px;
            background: linear-gradient(90deg, #fff, #a5b4fc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .header p {
            color: rgba(255, 255, 255, 0.6);
            font-size: 14px;
        }

        /* Connection State */
        .wallet-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
            backdrop-filter: blur(20px);
        }

        .connect-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .connect-btn {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            color: #fff;
            font-size: 15px;
            font-weight: 500;
        }

        .connect-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(99, 102, 241, 0.5);
            transform: translateY(-2px);
        }

        .connect-btn img {
            width: 40px;
            height: 40px;
            border-radius: 10px;
        }

        .connect-btn .wallet-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .metamask-icon { background: linear-gradient(135deg, #f6851b, #e2761b); }
        .walletconnect-icon { background: linear-gradient(135deg, #3b99fc, #2d7dd2); }
        .coinbase-icon { background: linear-gradient(135deg, #0052ff, #0038b8); }

        /* Connected State */
        .connected-view {
            display: none;
        }

        .connected-view.active {
            display: block;
        }

        .disconnected-view.hidden {
            display: none;
        }

        .wallet-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
        }

        .wallet-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .wallet-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .wallet-avatar .material-symbols-outlined {
            font-size: 24px;
        }

        .wallet-address {
            font-family: 'SF Mono', monospace;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.9);
        }

        .wallet-label {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.5);
        }

        .status-badge {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            background: rgba(34, 197, 94, 0.15);
            border-radius: 20px;
            font-size: 12px;
            color: #22c55e;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: #22c55e;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Network Selector */
        .network-selector {
            margin-bottom: 24px;
        }

        .network-selector label {
            display: block;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.5);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .network-dropdown {
            position: relative;
        }

        .network-btn {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            cursor: pointer;
            color: #fff;
            font-size: 14px;
        }

        .network-btn:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        .network-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .network-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
        }

        .network-menu {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            margin-top: 8px;
            background: rgba(20, 20, 35, 0.98);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 8px;
            z-index: 100;
            display: none;
        }

        .network-menu.open {
            display: block;
        }

        .network-option {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .network-option:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        .network-option.active {
            background: rgba(99, 102, 241, 0.2);
        }

        /* Balances */
        .balances-section h3 {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.5);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 16px;
        }

        .total-balance {
            text-align: center;
            padding: 24px;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.15), rgba(139, 92, 246, 0.1));
            border-radius: 16px;
            margin-bottom: 20px;
        }

        .total-label {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.5);
            margin-bottom: 8px;
        }

        .total-value {
            font-size: 36px;
            font-weight: 700;
            background: linear-gradient(90deg, #fff, #a5b4fc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .total-change {
            font-size: 14px;
            color: #22c55e;
            margin-top: 8px;
        }

        .total-change.negative {
            color: #ef4444;
        }

        .token-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .token-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 14px 16px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.06);
            border-radius: 12px;
            transition: all 0.2s;
        }

        .token-item:hover {
            background: rgba(255, 255, 255, 0.06);
        }

        .token-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .token-icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: 700;
        }

        .eth-icon { background: linear-gradient(135deg, #627eea, #3c4a9e); }
        .usdc-icon { background: linear-gradient(135deg, #2775ca, #1a5099); }
        .usdt-icon { background: linear-gradient(135deg, #26a17b, #1a7a5a); }
        .arb-icon { background: linear-gradient(135deg, #28a0f0, #1a6aa3); }

        .token-name {
            font-weight: 500;
            font-size: 14px;
        }

        .token-symbol {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.5);
        }

        .token-balance {
            text-align: right;
        }

        .token-amount {
            font-weight: 600;
            font-size: 14px;
        }

        .token-usd {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.5);
        }

        /* Actions */
        .actions {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-top: 24px;
        }

        .action-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 16px 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            color: #fff;
        }

        .action-btn:hover {
            background: rgba(99, 102, 241, 0.2);
            border-color: rgba(99, 102, 241, 0.4);
        }

        .action-btn .material-symbols-outlined {
            font-size: 24px;
            color: #6366f1;
        }

        .action-btn span:last-child {
            font-size: 12px;
            font-weight: 500;
        }

        /* Disconnect */
        .disconnect-btn {
            width: 100%;
            padding: 14px;
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 10px;
            color: #ef4444;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.2s;
        }

        .disconnect-btn:hover {
            background: rgba(239, 68, 68, 0.2);
        }

        /* Loading */
        .connecting-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .connecting-overlay.active {
            display: flex;
        }

        .connecting-content {
            text-align: center;
        }

        .spinner {
            width: 48px;
            height: 48px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top-color: #6366f1;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 16px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .connecting-text {
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Wallet Connect</h1>
            <p>Connect your wallet to access DeFi features</p>
        </div>

        <!-- Disconnected View -->
        <div class="disconnected-view" id="disconnectedView">
            <div class="wallet-card">
                <div class="connect-buttons">
                    <button class="connect-btn" onclick="connectWallet('metamask')">
                        <div class="wallet-icon metamask-icon">ðŸ¦Š</div>
                        <div>
                            <div>MetaMask</div>
                            <div style="font-size: 12px; color: rgba(255,255,255,0.5);">Popular browser wallet</div>
                        </div>
                    </button>
                    <button class="connect-btn" onclick="connectWallet('walletconnect')">
                        <div class="wallet-icon walletconnect-icon">
                            <span class="material-symbols-outlined" style="font-size: 20px;">qr_code_2</span>
                        </div>
                        <div>
                            <div>WalletConnect</div>
                            <div style="font-size: 12px; color: rgba(255,255,255,0.5);">Scan with mobile wallet</div>
                        </div>
                    </button>
                    <button class="connect-btn" onclick="connectWallet('coinbase')">
                        <div class="wallet-icon coinbase-icon">
                            <span style="font-weight: 700;">C</span>
                        </div>
                        <div>
                            <div>Coinbase Wallet</div>
                            <div style="font-size: 12px; color: rgba(255,255,255,0.5);">Self-custody wallet</div>
                        </div>
                    </button>
                </div>
            </div>

            <div style="text-align: center; color: rgba(255,255,255,0.4); font-size: 12px;">
                <p>By connecting, you agree to the Terms of Service</p>
            </div>
        </div>

        <!-- Connected View -->
        <div class="connected-view" id="connectedView">
            <div class="wallet-card">
                <div class="wallet-header">
                    <div class="wallet-info">
                        <div class="wallet-avatar">
                            <span class="material-symbols-outlined">account_balance_wallet</span>
                        </div>
                        <div>
                            <div class="wallet-label">Connected Wallet</div>
                            <div class="wallet-address" id="walletAddress">0x742d...3a9b</div>
                        </div>
                    </div>
                    <div class="status-badge">
                        <div class="status-dot"></div>
                        Connected
                    </div>
                </div>

                <!-- Network Selector -->
                <div class="network-selector">
                    <label>Network</label>
                    <div class="network-dropdown">
                        <button class="network-btn" onclick="toggleNetworkMenu()">
                            <div class="network-info">
                                <div class="network-icon eth-icon" id="networkIcon"></div>
                                <span id="networkName">Ethereum</span>
                            </div>
                            <span class="material-symbols-outlined">expand_more</span>
                        </button>
                        <div class="network-menu" id="networkMenu">
                            <div class="network-option active" onclick="selectNetwork('ethereum', 'Ethereum', '#627eea')">
                                <div class="network-icon eth-icon"></div>
                                <span>Ethereum</span>
                            </div>
                            <div class="network-option" onclick="selectNetwork('arbitrum', 'Arbitrum', '#28a0f0')">
                                <div class="network-icon arb-icon"></div>
                                <span>Arbitrum</span>
                            </div>
                            <div class="network-option" onclick="selectNetwork('base', 'Base', '#0052ff')">
                                <div class="network-icon" style="background: linear-gradient(135deg, #0052ff, #003acc);"></div>
                                <span>Base</span>
                            </div>
                            <div class="network-option" onclick="selectNetwork('polygon', 'Polygon', '#8247e5')">
                                <div class="network-icon" style="background: linear-gradient(135deg, #8247e5, #5e35a1);"></div>
                                <span>Polygon</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Total Balance -->
                <div class="total-balance">
                    <div class="total-label">Total Balance</div>
                    <div class="total-value" id="totalBalance">$12,847.32</div>
                    <div class="total-change" id="totalChange">+$423.18 (3.4%) today</div>
                </div>

                <!-- Token List -->
                <div class="balances-section">
                    <h3>Assets</h3>
                    <div class="token-list" id="tokenList">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- Actions -->
                <div class="actions">
                    <button class="action-btn" onclick="showAction('send')">
                        <span class="material-symbols-outlined">arrow_upward</span>
                        <span>Send</span>
                    </button>
                    <button class="action-btn" onclick="showAction('receive')">
                        <span class="material-symbols-outlined">arrow_downward</span>
                        <span>Receive</span>
                    </button>
                    <button class="action-btn" onclick="showAction('swap')">
                        <span class="material-symbols-outlined">swap_horiz</span>
                        <span>Swap</span>
                    </button>
                </div>

                <button class="disconnect-btn" onclick="disconnectWallet()">
                    Disconnect Wallet
                </button>
            </div>
        </div>
    </div>

    <!-- Connecting Overlay -->
    <div class="connecting-overlay" id="connectingOverlay">
        <div class="connecting-content">
            <div class="spinner"></div>
            <div class="connecting-text">Connecting to wallet...</div>
        </div>
    </div>

    <script>
        // Mock wallet data
        const mockWallets = {
            metamask: {
                address: '0x742d35Cc6634C0532925a3b844Bc9e7595f3a9b',
                shortAddress: '0x742d...3a9b'
            },
            walletconnect: {
                address: '0x8ba1f109551bD432803012645Ac136ddd64DBA72',
                shortAddress: '0x8ba1...BA72'
            },
            coinbase: {
                address: '0x1234567890abcdef1234567890abcdef12345678',
                shortAddress: '0x1234...5678'
            }
        };

        const mockTokens = [
            { name: 'Ethereum', symbol: 'ETH', balance: 2.4521, usd: 8123.45, icon: 'eth-icon', change: 3.2 },
            { name: 'USD Coin', symbol: 'USDC', balance: 3500.00, usd: 3500.00, icon: 'usdc-icon', change: 0 },
            { name: 'Tether', symbol: 'USDT', balance: 1223.87, usd: 1223.87, icon: 'usdt-icon', change: 0 },
        ];

        let connectedWallet = null;
        let currentNetwork = 'ethereum';

        // Check for saved connection
        function init() {
            const saved = localStorage.getItem('sperax_wallet');
            if (saved) {
                const data = JSON.parse(saved);
                connectedWallet = data.wallet;
                currentNetwork = data.network || 'ethereum';
                showConnectedView();
            }
        }

        function connectWallet(type) {
            const overlay = document.getElementById('connectingOverlay');
            overlay.classList.add('active');

            // Simulate connection delay
            setTimeout(() => {
                overlay.classList.remove('active');
                connectedWallet = type;
                
                // Save connection
                localStorage.setItem('sperax_wallet', JSON.stringify({
                    wallet: type,
                    network: currentNetwork
                }));

                showConnectedView();
                
                // Notify parent if available
                if (window.parent !== window && window.parent.showNotification) {
                    window.parent.showNotification('Wallet Connected', `Connected to ${type}`, 'success');
                }
            }, 1500);
        }

        function showConnectedView() {
            document.getElementById('disconnectedView').classList.add('hidden');
            document.getElementById('connectedView').classList.add('active');
            
            // Update address
            const wallet = mockWallets[connectedWallet] || mockWallets.metamask;
            document.getElementById('walletAddress').textContent = wallet.shortAddress;
            
            // Render tokens
            renderTokens();
        }

        function disconnectWallet() {
            connectedWallet = null;
            localStorage.removeItem('sperax_wallet');
            document.getElementById('disconnectedView').classList.remove('hidden');
            document.getElementById('connectedView').classList.remove('active');
        }

        function toggleNetworkMenu() {
            const menu = document.getElementById('networkMenu');
            menu.classList.toggle('open');
        }

        function selectNetwork(network, name, color) {
            currentNetwork = network;
            document.getElementById('networkName').textContent = name;
            
            // Update icon color
            const iconEl = document.getElementById('networkIcon');
            iconEl.style.background = `linear-gradient(135deg, ${color}, ${adjustColor(color, -30)})`;
            
            // Update active state
            document.querySelectorAll('.network-option').forEach(opt => opt.classList.remove('active'));
            event.currentTarget.classList.add('active');
            
            // Close menu
            document.getElementById('networkMenu').classList.remove('open');
            
            // Save
            localStorage.setItem('sperax_wallet', JSON.stringify({
                wallet: connectedWallet,
                network: currentNetwork
            }));

            // Refresh balances for network (mock - just re-render)
            renderTokens();
        }

        function adjustColor(hex, amount) {
            const num = parseInt(hex.replace('#', ''), 16);
            const r = Math.min(255, Math.max(0, (num >> 16) + amount));
            const g = Math.min(255, Math.max(0, ((num >> 8) & 0x00FF) + amount));
            const b = Math.min(255, Math.max(0, (num & 0x0000FF) + amount));
            return '#' + (1 << 24 | r << 16 | g << 8 | b).toString(16).slice(1);
        }

        function renderTokens() {
            const container = document.getElementById('tokenList');
            container.innerHTML = mockTokens.map(token => `
                <div class="token-item">
                    <div class="token-info">
                        <div class="token-icon ${token.icon}">${token.symbol.charAt(0)}</div>
                        <div>
                            <div class="token-name">${token.name}</div>
                            <div class="token-symbol">${token.symbol}</div>
                        </div>
                    </div>
                    <div class="token-balance">
                        <div class="token-amount">${token.balance.toLocaleString(undefined, { maximumFractionDigits: 4 })}</div>
                        <div class="token-usd">$${token.usd.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</div>
                    </div>
                </div>
            `).join('');
        }

        function showAction(action) {
            alert(`${action.charAt(0).toUpperCase() + action.slice(1)} functionality would open here.\n\nIn a full implementation, this would show a ${action} form.`);
        }

        // Close network menu on outside click
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.network-dropdown')) {
                document.getElementById('networkMenu').classList.remove('open');
            }
        });

        // Initialize
        init();
    </script>
</body>
</html>
