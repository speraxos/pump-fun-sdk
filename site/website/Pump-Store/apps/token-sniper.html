<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="pump-include" content="pump.css">
    <meta name="capabilities" content="token_sniper">
    <meta name="aspect-ratio" content="16/10">
    <meta name="pump-icon" content="bolt">
    <meta name="pump-perms" content="network" />
    <title>Token Sniper</title>
    <style>
        :root { --bg1:#0a0a0a; --bg2:#111; --bg3:#1a1a1a; --accent:#00e87b; --purple:#9945FF; --red:#ff4d4d; --yellow:#ffd43b; --blue:#14F195; }
        * { margin:0; padding:0; box-sizing:border-box; }
        body { font-family:'Poppins',system-ui,sans-serif; background:var(--bg1); color:#fff; height:100vh; overflow:hidden; }
        .app { display:grid; grid-template-rows:auto auto 1fr auto; height:100vh; }

        .header { padding:12px 16px; display:flex; align-items:center; gap:10px; border-bottom:1px solid #ffffff0a; }
        .header h1 { font-size:0.95rem; font-weight:600; }
        .live-dot { width:8px; height:8px; background:var(--accent); border-radius:50%; animation:pulse 1.5s infinite; }
        @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.3} }
        .live-label { font-size:0.7rem; color:var(--accent); font-weight:600; }
        .header-actions { margin-left:auto; display:flex; gap:6px; }
        .header-btn { padding:5px 12px; border-radius:8px; border:1px solid #ffffff0c; background:var(--bg2); color:#aaa; font-size:0.7rem; cursor:pointer; font-family:inherit; transition:all 0.15s; }
        .header-btn:hover { background:var(--bg3); color:#fff; }
        .header-btn.active { background:var(--accent); color:#000; border-color:var(--accent); }

        .filters { display:flex; gap:8px; padding:8px 16px; border-bottom:1px solid #ffffff06; flex-wrap:wrap; }
        .filter-chip { display:flex; align-items:center; gap:4px; padding:4px 10px; border-radius:20px; border:1px solid #ffffff0c; background:var(--bg2); font-size:0.65rem; color:#aaa; cursor:pointer; transition:all 0.15s; }
        .filter-chip:hover { border-color:var(--accent); color:var(--accent); }
        .filter-chip.active { background:rgba(0,232,123,0.1); border-color:var(--accent); color:var(--accent); }
        .filter-input { background:var(--bg2); border:1px solid #ffffff0c; border-radius:20px; padding:4px 10px; font-size:0.65rem; color:#fff; outline:none; font-family:inherit; width:100px; }
        .filter-input::placeholder { color:#444; }

        .feed { overflow-y:auto; padding:8px 16px; }
        .token-card { background:var(--bg2); border:1px solid #ffffff08; border-radius:12px; padding:14px; margin-bottom:8px; transition:all 0.2s; cursor:pointer; }
        .token-card:hover { border-color:var(--accent); transform:translateY(-1px); }
        .token-card.new { animation:slideIn 0.4s ease-out; border-color:rgba(0,232,123,0.3); }
        @keyframes slideIn { from{opacity:0;transform:translateY(-12px)} to{opacity:1;transform:none} }

        .card-top { display:flex; align-items:center; gap:10px; margin-bottom:10px; }
        .card-icon { width:36px; height:36px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:700; font-size:0.75rem; flex-shrink:0; }
        .card-info { flex:1; min-width:0; }
        .card-name { font-weight:600; font-size:0.85rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
        .card-symbol { font-size:0.65rem; color:#666; }
        .card-age { font-size:0.6rem; color:#555; margin-left:auto; flex-shrink:0; }
        .card-age .material-symbols-rounded { font-size:12px; vertical-align:-2px; }

        .card-stats { display:flex; gap:8px; flex-wrap:wrap; }
        .card-stat { background:var(--bg3); padding:4px 8px; border-radius:6px; font-size:0.65rem; }
        .card-stat .label { color:#666; }
        .card-stat .val { font-weight:600; margin-left:4px; }
        .card-stat .val.green { color:var(--accent); }
        .card-stat .val.purple { color:var(--purple); }
        .card-stat .val.yellow { color:var(--yellow); }

        .card-bottom { display:flex; align-items:center; gap:6px; margin-top:10px; }
        .curve-mini { flex:1; height:3px; background:var(--bg3); border-radius:3px; overflow:hidden; }
        .curve-mini-fill { height:100%; background:linear-gradient(90deg,var(--accent),var(--purple)); border-radius:3px; }
        .curve-pct { font-size:0.6rem; color:#888; }
        .snipe-btn { padding:5px 14px; border-radius:8px; border:none; background:var(--accent); color:#000; font-weight:700; font-size:0.7rem; cursor:pointer; font-family:inherit; transition:all 0.15s; }
        .snipe-btn:hover { transform:scale(1.05); }

        .footer { padding:6px 16px; border-top:1px solid #ffffff0a; font-size:0.6rem; color:#444; display:flex; justify-content:space-between; align-items:center; }
        .counter { display:flex; gap:12px; }
        .counter span strong { color:var(--accent); }
    </style>
</head>
<body>
    <div class="app">
        <div class="header">
            <span class="material-symbols-rounded" style="color:var(--accent);">bolt</span>
            <h1>Token Sniper</h1>
            <span class="live-dot"></span>
            <span class="live-label">LIVE</span>
            <div class="header-actions">
                <button class="header-btn active" onclick="toggleFeed(this,'all')">All</button>
                <button class="header-btn" onclick="toggleFeed(this,'new')">New Only</button>
                <button class="header-btn" onclick="toggleFeed(this,'graduating')">Graduating</button>
            </div>
        </div>

        <div class="filters">
            <div class="filter-chip active" onclick="toggleFilter(this)">
                <span class="material-symbols-rounded" style="font-size:12px">verified</span> KYC Dev
            </div>
            <div class="filter-chip" onclick="toggleFilter(this)">
                <span class="material-symbols-rounded" style="font-size:12px">lock</span> LP Locked
            </div>
            <div class="filter-chip" onclick="toggleFilter(this)">
                <span class="material-symbols-rounded" style="font-size:12px">trending_up</span> &gt;$10K MCap
            </div>
            <div class="filter-chip" onclick="toggleFilter(this)">
                <span class="material-symbols-rounded" style="font-size:12px">group</span> &gt;50 Holders
            </div>
            <input class="filter-input" placeholder="Min SOL liq..." id="minLiq" type="number" step="0.1">
            <input class="filter-input" placeholder="Max age (min)..." id="maxAge" type="number">
        </div>

        <div class="feed" id="tokenFeed"></div>

        <div class="footer">
            <div class="counter">
                <span>Tokens found: <strong id="totalFound">0</strong></span>
                <span>New (5min): <strong id="newCount">0</strong></span>
                <span>Migrated: <strong id="migratedCount">0</strong></span>
            </div>
            <span id="rpcStatus">RPC: Demo Mode</span>
        </div>
    </div>

    <script>
    const NAMES = ['MOONCAT','BONKINU','SOLTOSHI','DEGENWIF','AIDOG','SOLAPE','PUMPIT','MEOWFI','WAGMI','NGMI','FROGGY','TURBOSOL','GALAXYFI','DORKL','MEMECOIN','SHIBSOL','PEPEFROG','GOATSOL','BULLRUN','COZYCAT','HOTDOG','ROCKET','DIAMOND','SENDIT','YOLOSOL','BASED','CHAD','SIGMA','ALPHA','OMEGA'];
    const COLORS = ['#00e87b','#9945FF','#14F195','#ff4d4d','#ffd43b','#00bcd4','#ff9800','#e91e63','#8bc34a','#00e5ff'];
    let tokenId = 0;
    let allTokens = [];
    let feedMode = 'all';

    function randomToken() {
        const name = NAMES[Math.floor(Math.random()*NAMES.length)];
        const age = Math.floor(Math.random()*120);
        const mcap = Math.random()*80000+500;
        const vol = mcap * (0.2+Math.random()*0.5);
        const holders = Math.floor(Math.random()*500+5);
        const liq = Math.random()*80+1;
        const curve = Math.random()*100;
        const txns = Math.floor(Math.random()*2000+10);
        const color = COLORS[Math.floor(Math.random()*COLORS.length)];
        return { id:++tokenId, name, symbol:name, age, mcap, vol, holders, liq, curve, txns, color, time:Date.now() };
    }

    function formatNum(n) {
        if (n >= 1e6) return (n/1e6).toFixed(1)+'M';
        if (n >= 1e3) return (n/1e3).toFixed(1)+'K';
        return n.toFixed(1);
    }

    function renderToken(t, isNew) {
        const graduating = t.curve > 80;
        return `<div class="token-card ${isNew?'new':''}" onclick="openToken('${t.symbol}')">
            <div class="card-top">
                <div class="card-icon" style="background:${t.color}22;color:${t.color}">${t.symbol.slice(0,2)}</div>
                <div class="card-info">
                    <div class="card-name">${t.name}</div>
                    <div class="card-symbol">$${t.symbol}</div>
                </div>
                <div class="card-age">
                    <span class="material-symbols-rounded">schedule</span> ${t.age < 60 ? t.age+'m' : Math.floor(t.age/60)+'h '+t.age%60+'m'} ago
                </div>
            </div>
            <div class="card-stats">
                <div class="card-stat"><span class="label">MCap</span><span class="val green">$${formatNum(t.mcap)}</span></div>
                <div class="card-stat"><span class="label">Vol</span><span class="val">$${formatNum(t.vol)}</span></div>
                <div class="card-stat"><span class="label">Liq</span><span class="val purple">${t.liq.toFixed(1)} SOL</span></div>
                <div class="card-stat"><span class="label">Holders</span><span class="val">${t.holders}</span></div>
                <div class="card-stat"><span class="label">Txns</span><span class="val">${t.txns.toLocaleString()}</span></div>
                ${graduating ? '<div class="card-stat"><span class="val yellow">ðŸš€ Graduating!</span></div>' : ''}
            </div>
            <div class="card-bottom">
                <div class="curve-mini"><div class="curve-mini-fill" style="width:${t.curve}%"></div></div>
                <span class="curve-pct">${t.curve.toFixed(0)}%</span>
                <button class="snipe-btn" onclick="event.stopPropagation();snipe('${t.symbol}')">Snipe</button>
            </div>
        </div>`;
    }

    function applyFilters(tokens) {
        const minLiq = parseFloat(document.getElementById('minLiq').value) || 0;
        const maxAge = parseFloat(document.getElementById('maxAge').value) || Infinity;
        return tokens.filter(t => {
            if (feedMode === 'new' && t.age > 5) return false;
            if (feedMode === 'graduating' && t.curve < 75) return false;
            if (t.liq < minLiq) return false;
            if (t.age > maxAge) return false;
            return true;
        });
    }

    function renderFeed() {
        const filtered = applyFilters(allTokens);
        const feed = document.getElementById('tokenFeed');
        feed.innerHTML = filtered.map((t,i) => renderToken(t, i < 3)).join('');
        document.getElementById('totalFound').textContent = allTokens.length;
        document.getElementById('newCount').textContent = allTokens.filter(t => t.age <= 5).length;
        document.getElementById('migratedCount').textContent = allTokens.filter(t => t.curve >= 100).length;
    }

    function toggleFeed(btn, mode) {
        feedMode = mode;
        document.querySelectorAll('.header-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        renderFeed();
    }

    function toggleFilter(el) { el.classList.toggle('active'); renderFeed(); }

    function snipe(symbol) {
        alert(`Snipe ${symbol}!\n\nIn production, this calls:\nPumpSdk.buyInstruction(mint, solAmount)\n\nConnect your wallet in the Solana Wallet app first.`);
    }

    function openToken(symbol) {
        // In a real PumpOS environment, this would open the Bonding Curve Viewer
        console.log('Open token:', symbol);
    }

    // Generate initial feed
    for (let i = 0; i < 20; i++) allTokens.push(randomToken());
    allTokens.sort((a,b) => a.age - b.age);
    renderFeed();

    // Add new tokens periodically
    setInterval(() => {
        const newToken = randomToken();
        newToken.age = 0;
        allTokens.unshift(newToken);
        if (allTokens.length > 100) allTokens.pop();
        renderFeed();
    }, 8000);

    // Filter inputs
    document.getElementById('minLiq').addEventListener('input', renderFeed);
    document.getElementById('maxAge').addEventListener('input', renderFeed);
    </script>
</body>
</html>
